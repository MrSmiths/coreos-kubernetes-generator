---
storage:
  files:
    - filesystem: "root"
      path:       "/etc/metadata/coreos"
      mode:       0644
      contents:
        inline: |
          COREOS_VAGRANT_VIRTUALBOX_PRIVATE_IPV4=172.20.0.11
          COREOS_VAGRANT_VIRTUALBOX_HOSTNAME=coreos1
    - filesystem: "root"
      path:       "/etc/hostname"
      mode:       0644
      contents:
        inline: coreos1
    - filesystem: "root"
      path:       "/etc/hosts"
      mode:       0644
      contents:
        inline: |
          127.0.0.1	localhost
          ::1		localhost
          172.20.0.11 coreos1 coreos1.example.com
          172.20.0.12 coreos2 coreos2.example.com
          172.20.0.13 coreos3 coreos3.example.com
    - path: /etc/docker/ca.pem
      filesystem: root
      mode: 0644
      contents:
        inline: |
          -----BEGIN CERTIFICATE-----
          MIIDhTCCAm2gAwIBAgIJAPdp2fqmRedeMA0GCSqGSIb3DQEBCwUAMGAxCzAJBgNV
          BAYTAlVTMQswCQYDVQQIDAJOWTERMA8GA1UEBwwITmV3IFlvcmsxETAPBgNVBAoM
          CENvbXBhbnkxMQwwCgYDVQQLDANPcHMxEDAOBgNVBAMMB0t1YmUtQ0EwHhcNMTgx
          MjI0MjE1ODI0WhcNMjgxMjIxMjE1ODI0WjBgMQswCQYDVQQGEwJVUzELMAkGA1UE
          CAwCTlkxETAPBgNVBAcMCE5ldyBZb3JrMREwDwYDVQQKDAhDb21wYW55MTEMMAoG
          A1UECwwDT3BzMRAwDgYDVQQDDAdLdWJlLUNBMIIBIjANBgkqhkiG9w0BAQEFAAOC
          AQ8AMIIBCgKCAQEAozecwrUpvaWzE0uykH4LLRX+C3fiJDVSmkwS+vlYbiuyiKmK
          SrWQnfI7ahytZgqcgT686MOTdSaAioZF6BHtlNDqwmtH2s7OrBjRMf07arYla1og
          6eu5cz+/GcL/2K7ysq7nr0WAm7SS52seAyA0bg9vHy5LWLEZ10B8sMTliIBkyJoe
          SH65MFDiCkn0sWB/bgYQiMq/3Z9kUAf/lX7PQRVOxEru3d4gpbsK+3GD6yTPXT4B
          3z+8PjYeIw5QNphdM3zOFd9NidwyGYwk5DLBsHQRAqhsm1lhBC3+JiaJ5knFdzje
          yPg55DyfKnYjRgEUn9VxyqIfHwl9W8HcZoVzOwIDAQABo0IwQDAOBgNVHQ8BAf8E
          BAMCAQYwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUaPVBptTGkvBrW2aDMKjr
          Pvs6dEYwDQYJKoZIhvcNAQELBQADggEBAH4yCCAGcurjSa4UzXGL6Z+kd1M3u9at
          ZbpOVvBKpCaHj7Lsgoz9neKHHVboRRbdv9KYkNRqmotz4tpvZQ9nXwaTXjdzw7+X
          /OgpnTFR8dx8zjnoB8UfN0atdRaaTzDa0XuDTJh7jqPQDX+BVu3UZKb6y4L7CrpN
          RHiTpYE1AFCEFrtptdyFHANWJb+PN+6tEpSt7l+2vv6/Ej+nCXiG1surm5yfllj6
          ugT0hxfPMefWWE5lxloR6atG87rJsonuRVWOao1uz+TLeGEPRAGQSlXPT6ux9hko
          m3vmP/B6qA48oVaJYYg3XN0WzWX6W+qy5mNuxAzBcvkD08WCBmV4lwQ=
          -----END CERTIFICATE-----

    - path: /etc/docker/server.pem
      filesystem: root
      mode: 0644
      contents:
        inline: |
          -----BEGIN CERTIFICATE-----
          MIIFiDCCBHCgAwIBAgIJAMZSQM9IPPJIMA0GCSqGSIb3DQEBCwUAMGAxCzAJBgNV
          BAYTAlVTMQswCQYDVQQIDAJOWTERMA8GA1UEBwwITmV3IFlvcmsxETAPBgNVBAoM
          CENvbXBhbnkxMQwwCgYDVQQLDANPcHMxEDAOBgNVBAMMB0t1YmUtQ0EwHhcNMTgx
          MjI0MjE1ODI0WhcNMjgxMjIxMjE1ODI0WjBeMQswCQYDVQQGEwJVUzELMAkGA1UE
          CAwCTlkxETAPBgNVBAcMCE5ldyBZb3JrMREwDwYDVQQKDAhDb21wYW55MTEMMAoG
          A1UECwwDT3BzMQ4wDAYDVQQDDAVhZG1pbjCCASIwDQYJKoZIhvcNAQEBBQADggEP
          ADCCAQoCggEBAMrm3BpWi8bWK+LGfTRedAC/xZ5hOnlDUedMCdjTQRSYdVeKPlFf
          1n7fkTGCyimpvA/tzknQHOgX72g2K6pbhgQJYIjm/a/0I2tVb1tMnio1l5wtnt0D
          M3NsscnhAsa1TPHVvI8V+NljpdEgpjUyA9F4nzppL/k8pHEIUdpan4Tp2VvbNrOz
          vs2crbMcUn+fmpjYjKv3nilcdBHfZYWz1oMoeuzFkgqc5igo4fyO8ySozd07huUf
          54UO1Wx2Fz9dCkyop/afuRg/0/FGnW0crhQgX1b8prwnqI1ajvJzVZbFGHGXMgDX
          V8stA1WTD/2d9fXQn0M0fbDP50CiG75e+0cCAwEAAaOCAkUwggJBMA4GA1UdDwEB
          /wQEAwIF4DAdBgNVHSUEFjAUBggrBgEFBQcDAgYIKwYBBQUHAwEwDAYDVR0TAQH/
          BAIwADAdBgNVHQ4EFgQU56zvVU3prpWbNx84pItcmVEAhU4wggHhBgNVHREEggHY
          MIIB1IIKa3ViZXJuZXRlc4ISa3ViZXJuZXRlcy5kZWZhdWx0ghZrdWJlcm5ldGVz
          LmRlZmF1bHQuc3ZjgiRrdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9j
          YWyCDmt1YmUtYXBpc2VydmVyggprdWJlLWFkbWlugglsb2NhbGhvc3SCC2V4YW1w
          bGUuY29tggdjb3Jlb3Mxggdjb3Jlb3Myggdjb3Jlb3Mzgg1jb3Jlb3MxLmxvY2Fs
          gg1jb3Jlb3MyLmxvY2Fsgg1jb3Jlb3MzLmxvY2FsghNjb3Jlb3MxLmV4YW1wbGUu
          Y29tghNjb3Jlb3MyLmV4YW1wbGUuY29tghNjb3Jlb3MzLmV4YW1wbGUuY29tggd3
          b3JrZXIxggd3b3JrZXIyggd3b3JrZXIzghN3b3JrZXIxLmV4YW1wbGUuY29tghN3
          b3JrZXIyLmV4YW1wbGUuY29tghN3b3JrZXIzLmV4YW1wbGUuY29thwR/AAABhwQA
          AAAAhwQKAwABhwQKAwAKhwQKAwAyhwSsFAABhwSsFAAChwSsFAALhwSsFAAMhwSs
          FAANhwSsFAAzhwSsFAA0hwSsFAA1gRFhZG1pbkBleGFtcGxlLmNvbTANBgkqhkiG
          9w0BAQsFAAOCAQEAoInSNFna4TsM6t8jAnkC0dQ3lsTETaRwQSfuBRGoxWo7j7Dq
          yXn4mXdPPnrpGKkWTTcFae1Fsfy1W0m6sPPuxOdccWiQqpadn4onl0UYgt/Bk2rY
          paqKvGy+i229DPG72AfwqNnSsBhZz84AYF/iF5HVh+MkhhxUjqGL8Yp6UZPZCgbg
          906EDZJVO111MPlGJ4aFI2YrvX6BazMP5UuiaW794Ips969t49g2SsJWYBZtruD9
          YoiPxcpn5C6YmZHy4JnGwLmwcU/S2V72NIumj0as3LimULAmZvFMojE95Y4Ususk
          QO0RGsfHBZfCP7BoLXaQuB1PSlcR+QbOSphVxQ==
          -----END CERTIFICATE-----

    - path: /etc/docker/server-key.pem
      filesystem: root
      mode: 0644
      contents:
        inline: |
          -----BEGIN RSA PRIVATE KEY-----
          MIIEogIBAAKCAQEAyubcGlaLxtYr4sZ9NF50AL/FnmE6eUNR50wJ2NNBFJh1V4o+
          UV/Wft+RMYLKKam8D+3OSdAc6BfvaDYrqluGBAlgiOb9r/Qja1VvW0yeKjWXnC2e
          3QMzc2yxyeECxrVM8dW8jxX42WOl0SCmNTID0XifOmkv+TykcQhR2lqfhOnZW9s2
          s7O+zZytsxxSf5+amNiMq/eeKVx0Ed9lhbPWgyh67MWSCpzmKCjh/I7zJKjN3TuG
          5R/nhQ7VbHYXP10KTKin9p+5GD/T8UadbRyuFCBfVvymvCeojVqO8nNVlsUYcZcy
          ANdXyy0DVZMP/Z319dCfQzR9sM/nQKIbvl77RwIDAQABAoIBAFLeAprHKgMlSXsu
          8cfHo70ClaVftE/+TJ8YkRT7AqN0uMft8BGwAJyElnoQHpzxc5tV1mCTHJs121NG
          fILxKkTPx5tiK84G+chGdlplalt209q3TyCYxBSqGdqHiWi6dxh14LLXmHDAn+JP
          YVJsgN62UuG6QBucxtRbP4LcbDYNyQmKuocDgeEEEvvvHXmEQhsLONB4OFc1estS
          nPb7gAViBNhaKYIGnBVfkEg7OltGs2lDMUas+xReb9p5T3kcocE78+lZs8OSKYBg
          K+sTRNEvd+rCyjiT4lVwURcnlN6HIbwETxh9zramFj6Ffwv9BqFjuKKQF04/lRU4
          D0fPuyECgYEA+XNoANtAJMDRpaDHkVNpNs5/ew55j9Lyug7uMLMbTErHw2SIdFEr
          cJMz2PVhRJMw9m7rZaorbDIMusPNl0RZkz7AocI9GZN0fdTO1TTIuC+PST8BQVDI
          PW1X/LTLfGVXfZlVsJvHrZ7Xcv/uwlV1o+8FOOaTz6Q2EsalIi8Zu0kCgYEA0DqX
          UyJTklrvOR4dCceFc9ia8xazjSXATaO0swm4b+QAIjqQ/zs7CXdjM3Uimcoi8Qtu
          RYTPAsf3S1UwOAiEdgXMbfwX0a5mZyFxysCSF3qDpbqvMm2hAJC13CPm5YLNQ+TE
          Ap70jDt5/trHxazwYc3EtF267P+pT8Ds/2BC8g8CgYBRy+gEr+BerOOR/iCypLlR
          gXEH9v0hjjiNjivIyFJhN/w9NBASpDMsXPiZYg0dIW7iwAhsc9p9RgQqkd4uhfkh
          cWhVIo5KfrGqOUgBXaebzeycRg6xTj369ontkZNQHSMNSmRw3wQhCH75dLbj/oXu
          1YfO2r0JT31ztrObe/piEQKBgCAMlJP4GZLSKjXJW8DQk8rD0P2PRe14nQOWKc7Q
          tTGLjzW1e/G8xRZs6LjX046GHSCqmLtceJw9+OMAZp6JORINTGy1O1lLlXlUHXaO
          cy3n7nFIrYR+eSRkIYmTgQtcOYm0oTKiEpOu59UBCXR0bL8w85CrSIUHyKB82j1o
          LIWjAoGAb03OlhPICFOskhtarqKv/B3ReAfEyh9mcpn7qhYsLsErh7tlg1h8prlF
          rlpxkY9YOqCjqd9PkCdPagHnEU82HJ/eQrpOvLrpfgKlMUObEGgZymMlkRvbLxLy
          BHWWoS+BnhAQsl8WHValXW9Hm3c2zQJCmJcypA3mmr41AO0Z++o=
          -----END RSA PRIVATE KEY-----

    - path: "/etc/motd"
      filesystem: root
      mode: 0644
      contents:
        inline: | 
          Just another day!!
    - path: /etc/environment
      filesystem: root
      mode: 0644
      contents:
        inline: |
          COREOS_VAGRANT_VIRTUALBOX_PRIVATE_IPV4=172.20.0.11
          COREOS_VAGRANT_VIRTUALBOX_HOSTNAME=coreos1
          ADVERTISE_IP=172.20.0.11
          COREOS_PRIVATE_IPV4=172.20.0.11
          ETCDCTL_SSL_DIR=/var/lib/etcd/ssl
          ETCD_SSL_DIR=/var/lib/etcd/ssl
          ETCDCTL_CA_FILE=/etc/ssl/certs/ca.pem
          ETCDCTL_CERT_FILE=/var/lib/etcd/ssl/etcd-node.pem
          ETCDCTL_KEY_FILE=/var/lib/etcd/ssl/etcd-node-key.pem
          ETCDCTL_ENDPOINTS="https://172.20.0.11:2379,https://172.20.0.12:2379,https://172.20.0.13:2379"
          ETCD_ENDPOINTS="https://172.20.0.11:2379,https://172.20.0.12:2379,https://172.20.0.13:2379"
          FLANNELD_ETCD_ENDPOINTS="https://172.20.0.11:2379,https://172.20.0.12:2379,https://172.20.0.13:2379"
          FLANNELD_IFACE="enp0s3"
          FLANNELD_ETCD_PREFIX="/coreos.com/network"
          LOCKSMITHCTL_ETCD_CAFILE=/etc/ssl/certs/ca.pem
          LOCKSMITHCTL_ETCD_CERTFILE=/var/lib/etcd/ssl/etcd-node.pem
          LOCKSMITHCTL_ETCD_KEYFILE=/var/lib/etcd/ssl/etcd-node-key.pem
          LOCKSMITHCTL_ENDPOINT="https://172.20.0.11:2379"
          #HTTP_PROXY=
          #HTTPS_PROXY=
          ##http_proxy=
          ##https_proxy=
          no_proxy=localhost,127.0.0.0/8,127.0.0.1,::1,172.20.0.11,172.20.0.12,172.20.0.13,coreos1,coreos2,coreos3,coreos1.example.com,coreos2.example.com,coreos3.example.com,/var/run/docker.sock
    - path: /etc/systemd/system.conf.d/10-default-env.conf
      filesystem: root
      mode: 0644
      contents:
        inline: |
          [Manager]
          #DefaultEnvironment=##http_proxy=
          #DefaultEnvironment=##https_proxy=
          DefaultEnvironment=#HTTP_PROXY=
          DefaultEnvironment=#HTTPS_PROXY=
          DefaultEnvironment="no_proxy=localhost,127.0.0.0/8,127.0.0.1,::1,172.20.0.11,172.20.0.12,172.20.0.13,coreos1,coreos2,coreos3,coreos1.example.com,coreos2.example.com,coreos3.example.com,/var/run/docker.sock"
    - path: /etc/systemd/system/docker.service.d/environment.conf
      filesystem: root
      mode: 0644
      contents:
        inline: |
          [Service]
          EnvironmentFile=/etc/environment
    - path: /etc/systemd/timesyncd.conf
      filesystem: root
      mode: 0644
      contents:
        inline: |
          [Time]
          NTP=pool.ntp.org
    - path: /var/lib/etcd/ssl/ca.pem
      filesystem: root
      mode: 0644
      contents:
        inline: |
          -----BEGIN CERTIFICATE-----
          MIIDhTCCAm2gAwIBAgIJAPdp2fqmRedeMA0GCSqGSIb3DQEBCwUAMGAxCzAJBgNV
          BAYTAlVTMQswCQYDVQQIDAJOWTERMA8GA1UEBwwITmV3IFlvcmsxETAPBgNVBAoM
          CENvbXBhbnkxMQwwCgYDVQQLDANPcHMxEDAOBgNVBAMMB0t1YmUtQ0EwHhcNMTgx
          MjI0MjE1ODI0WhcNMjgxMjIxMjE1ODI0WjBgMQswCQYDVQQGEwJVUzELMAkGA1UE
          CAwCTlkxETAPBgNVBAcMCE5ldyBZb3JrMREwDwYDVQQKDAhDb21wYW55MTEMMAoG
          A1UECwwDT3BzMRAwDgYDVQQDDAdLdWJlLUNBMIIBIjANBgkqhkiG9w0BAQEFAAOC
          AQ8AMIIBCgKCAQEAozecwrUpvaWzE0uykH4LLRX+C3fiJDVSmkwS+vlYbiuyiKmK
          SrWQnfI7ahytZgqcgT686MOTdSaAioZF6BHtlNDqwmtH2s7OrBjRMf07arYla1og
          6eu5cz+/GcL/2K7ysq7nr0WAm7SS52seAyA0bg9vHy5LWLEZ10B8sMTliIBkyJoe
          SH65MFDiCkn0sWB/bgYQiMq/3Z9kUAf/lX7PQRVOxEru3d4gpbsK+3GD6yTPXT4B
          3z+8PjYeIw5QNphdM3zOFd9NidwyGYwk5DLBsHQRAqhsm1lhBC3+JiaJ5knFdzje
          yPg55DyfKnYjRgEUn9VxyqIfHwl9W8HcZoVzOwIDAQABo0IwQDAOBgNVHQ8BAf8E
          BAMCAQYwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUaPVBptTGkvBrW2aDMKjr
          Pvs6dEYwDQYJKoZIhvcNAQELBQADggEBAH4yCCAGcurjSa4UzXGL6Z+kd1M3u9at
          ZbpOVvBKpCaHj7Lsgoz9neKHHVboRRbdv9KYkNRqmotz4tpvZQ9nXwaTXjdzw7+X
          /OgpnTFR8dx8zjnoB8UfN0atdRaaTzDa0XuDTJh7jqPQDX+BVu3UZKb6y4L7CrpN
          RHiTpYE1AFCEFrtptdyFHANWJb+PN+6tEpSt7l+2vv6/Ej+nCXiG1surm5yfllj6
          ugT0hxfPMefWWE5lxloR6atG87rJsonuRVWOao1uz+TLeGEPRAGQSlXPT6ux9hko
          m3vmP/B6qA48oVaJYYg3XN0WzWX6W+qy5mNuxAzBcvkD08WCBmV4lwQ=
          -----END CERTIFICATE-----

    - path: /etc/ssl/certs/ca.pem
      filesystem: root
      mode: 0644
      contents:
        inline: |
          -----BEGIN CERTIFICATE-----
          MIIDhTCCAm2gAwIBAgIJAPdp2fqmRedeMA0GCSqGSIb3DQEBCwUAMGAxCzAJBgNV
          BAYTAlVTMQswCQYDVQQIDAJOWTERMA8GA1UEBwwITmV3IFlvcmsxETAPBgNVBAoM
          CENvbXBhbnkxMQwwCgYDVQQLDANPcHMxEDAOBgNVBAMMB0t1YmUtQ0EwHhcNMTgx
          MjI0MjE1ODI0WhcNMjgxMjIxMjE1ODI0WjBgMQswCQYDVQQGEwJVUzELMAkGA1UE
          CAwCTlkxETAPBgNVBAcMCE5ldyBZb3JrMREwDwYDVQQKDAhDb21wYW55MTEMMAoG
          A1UECwwDT3BzMRAwDgYDVQQDDAdLdWJlLUNBMIIBIjANBgkqhkiG9w0BAQEFAAOC
          AQ8AMIIBCgKCAQEAozecwrUpvaWzE0uykH4LLRX+C3fiJDVSmkwS+vlYbiuyiKmK
          SrWQnfI7ahytZgqcgT686MOTdSaAioZF6BHtlNDqwmtH2s7OrBjRMf07arYla1og
          6eu5cz+/GcL/2K7ysq7nr0WAm7SS52seAyA0bg9vHy5LWLEZ10B8sMTliIBkyJoe
          SH65MFDiCkn0sWB/bgYQiMq/3Z9kUAf/lX7PQRVOxEru3d4gpbsK+3GD6yTPXT4B
          3z+8PjYeIw5QNphdM3zOFd9NidwyGYwk5DLBsHQRAqhsm1lhBC3+JiaJ5knFdzje
          yPg55DyfKnYjRgEUn9VxyqIfHwl9W8HcZoVzOwIDAQABo0IwQDAOBgNVHQ8BAf8E
          BAMCAQYwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUaPVBptTGkvBrW2aDMKjr
          Pvs6dEYwDQYJKoZIhvcNAQELBQADggEBAH4yCCAGcurjSa4UzXGL6Z+kd1M3u9at
          ZbpOVvBKpCaHj7Lsgoz9neKHHVboRRbdv9KYkNRqmotz4tpvZQ9nXwaTXjdzw7+X
          /OgpnTFR8dx8zjnoB8UfN0atdRaaTzDa0XuDTJh7jqPQDX+BVu3UZKb6y4L7CrpN
          RHiTpYE1AFCEFrtptdyFHANWJb+PN+6tEpSt7l+2vv6/Ej+nCXiG1surm5yfllj6
          ugT0hxfPMefWWE5lxloR6atG87rJsonuRVWOao1uz+TLeGEPRAGQSlXPT6ux9hko
          m3vmP/B6qA48oVaJYYg3XN0WzWX6W+qy5mNuxAzBcvkD08WCBmV4lwQ=
          -----END CERTIFICATE-----

    - path: /etc/kubernetes/ssl/ca.pem
      filesystem: root
      mode: 0644
      contents:
        inline: |
          -----BEGIN CERTIFICATE-----
          MIIDhTCCAm2gAwIBAgIJAPdp2fqmRedeMA0GCSqGSIb3DQEBCwUAMGAxCzAJBgNV
          BAYTAlVTMQswCQYDVQQIDAJOWTERMA8GA1UEBwwITmV3IFlvcmsxETAPBgNVBAoM
          CENvbXBhbnkxMQwwCgYDVQQLDANPcHMxEDAOBgNVBAMMB0t1YmUtQ0EwHhcNMTgx
          MjI0MjE1ODI0WhcNMjgxMjIxMjE1ODI0WjBgMQswCQYDVQQGEwJVUzELMAkGA1UE
          CAwCTlkxETAPBgNVBAcMCE5ldyBZb3JrMREwDwYDVQQKDAhDb21wYW55MTEMMAoG
          A1UECwwDT3BzMRAwDgYDVQQDDAdLdWJlLUNBMIIBIjANBgkqhkiG9w0BAQEFAAOC
          AQ8AMIIBCgKCAQEAozecwrUpvaWzE0uykH4LLRX+C3fiJDVSmkwS+vlYbiuyiKmK
          SrWQnfI7ahytZgqcgT686MOTdSaAioZF6BHtlNDqwmtH2s7OrBjRMf07arYla1og
          6eu5cz+/GcL/2K7ysq7nr0WAm7SS52seAyA0bg9vHy5LWLEZ10B8sMTliIBkyJoe
          SH65MFDiCkn0sWB/bgYQiMq/3Z9kUAf/lX7PQRVOxEru3d4gpbsK+3GD6yTPXT4B
          3z+8PjYeIw5QNphdM3zOFd9NidwyGYwk5DLBsHQRAqhsm1lhBC3+JiaJ5knFdzje
          yPg55DyfKnYjRgEUn9VxyqIfHwl9W8HcZoVzOwIDAQABo0IwQDAOBgNVHQ8BAf8E
          BAMCAQYwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUaPVBptTGkvBrW2aDMKjr
          Pvs6dEYwDQYJKoZIhvcNAQELBQADggEBAH4yCCAGcurjSa4UzXGL6Z+kd1M3u9at
          ZbpOVvBKpCaHj7Lsgoz9neKHHVboRRbdv9KYkNRqmotz4tpvZQ9nXwaTXjdzw7+X
          /OgpnTFR8dx8zjnoB8UfN0atdRaaTzDa0XuDTJh7jqPQDX+BVu3UZKb6y4L7CrpN
          RHiTpYE1AFCEFrtptdyFHANWJb+PN+6tEpSt7l+2vv6/Ej+nCXiG1surm5yfllj6
          ugT0hxfPMefWWE5lxloR6atG87rJsonuRVWOao1uz+TLeGEPRAGQSlXPT6ux9hko
          m3vmP/B6qA48oVaJYYg3XN0WzWX6W+qy5mNuxAzBcvkD08WCBmV4lwQ=
          -----END CERTIFICATE-----

    - path: /etc/kubernetes/ssl/ca-key.pem
      filesystem: root
      mode: 0644
      contents:
        inline: |
          -----BEGIN RSA PRIVATE KEY-----
          MIIEpAIBAAKCAQEAozecwrUpvaWzE0uykH4LLRX+C3fiJDVSmkwS+vlYbiuyiKmK
          SrWQnfI7ahytZgqcgT686MOTdSaAioZF6BHtlNDqwmtH2s7OrBjRMf07arYla1og
          6eu5cz+/GcL/2K7ysq7nr0WAm7SS52seAyA0bg9vHy5LWLEZ10B8sMTliIBkyJoe
          SH65MFDiCkn0sWB/bgYQiMq/3Z9kUAf/lX7PQRVOxEru3d4gpbsK+3GD6yTPXT4B
          3z+8PjYeIw5QNphdM3zOFd9NidwyGYwk5DLBsHQRAqhsm1lhBC3+JiaJ5knFdzje
          yPg55DyfKnYjRgEUn9VxyqIfHwl9W8HcZoVzOwIDAQABAoIBAG4LwfL5qMIIZZv9
          7tBDW4+zg00CMIQPO7lyz11OHxRw+/fur6I9ltsXhn2+Bh+Fyg3OWhpqOxLCueos
          LBgTdmdfENmy8YiS5X/dX7bfsV76nnIqG4T8fVY6RcO92TikhFh7WxSuvM6+ykmj
          zGF5JkCKwXZ5hS2wgubBwRCCQOxt6VbII5OtBRi6nOZtk9NzzyeJzsuPz6FTNPyC
          uyM3Hs7YXFeRHKRLGKuqj2mvhQzkOoC3cv7cyt0eL+BGebniHZBe6VlqbzdNy8bK
          L3s9pxkvDhifqXyHprNWvms9r3wCRQaL/mGavKYUqCbKOJHUn4BD84n7TlrwniHD
          L468bPECgYEAz/NHr8FQGLEH5qlw3j7b+VNqyEjB9xvN/wQ8zpYpDYK0fv3B32q0
          xHw831eromYB5uSW+OEoQVUaPw1vv0saaAFF124iLU4GAr6hpY0WPqhX3lXRJiIb
          OJvDe8fKBbNF/HBP7KHLZF3kwL1srsq2M1Cmcv+aLkrX5g4D9jqYhOkCgYEAyO5F
          p6XYD5cUtvBSniHfmdK82SIhV4zXs/xfF2baUbDNicuo+dH1EUsVI3ml/SofrEnC
          extB+jr4uNC4aUFOoKvNJsw9TIhmAnaXkRzJbiQcCjb9X4MjLQf8SEtG3JZsDrr5
          QVSDzLswuG3eee7cflathZ8GJ4TGmFyYOj+H8IMCgYA21g53WGDIwhY1S0VKNgVH
          8Clee2E6yog90V4/k/VrbKYwPrZbNgZJMgHTW4kVIBUsT+dH5gf5gnmTWvW22hUy
          i/Ng5df5XnPTUXXK9DODflz9cl/e0GuhN+IKyBqL+kRgVzWcTuYVp3TlJo58YVQ+
          n+vks2ZzAqWAMv30dms10QKBgQDD6W8JE28jZE/SP2iOvsBiH1P68ohH8Q+wcnXV
          P3fHBvihTm4nh0vH3MlzmXz650OSnSh/GAiwjydMLFZiakbb6idRmPp70NKFvFP0
          LXlJZvPgEdXidt6pXYvigWNKWXBqvGukA1+vEyVh7d5qTTe4B5ORIYjCp3drv3y9
          7owBOQKBgQCArc1382flv9mXAjJEff5sQcvN8hd1iMzLthwhGWSSDNZ08XyrZh2G
          Xz73yCoX4fB6xgB00qHNz8JHQKcKgiwIcf5qlOftETc/76CsEJRA5h68N7eVqup1
          G2nt9sJgeqFfBCy7ygag4wpZfeqnoYmL5Gx41m3m4HnNRkyYZFzf2Q==
          -----END RSA PRIVATE KEY-----

    - path: /etc/kubernetes/ssl/etcd-node.pem
      filesystem: root
      mode: 0644
      contents:
        inline: |
          -----BEGIN CERTIFICATE-----
          MIIFiDCCBHCgAwIBAgIJAMZSQM9IPPJIMA0GCSqGSIb3DQEBCwUAMGAxCzAJBgNV
          BAYTAlVTMQswCQYDVQQIDAJOWTERMA8GA1UEBwwITmV3IFlvcmsxETAPBgNVBAoM
          CENvbXBhbnkxMQwwCgYDVQQLDANPcHMxEDAOBgNVBAMMB0t1YmUtQ0EwHhcNMTgx
          MjI0MjE1ODI0WhcNMjgxMjIxMjE1ODI0WjBeMQswCQYDVQQGEwJVUzELMAkGA1UE
          CAwCTlkxETAPBgNVBAcMCE5ldyBZb3JrMREwDwYDVQQKDAhDb21wYW55MTEMMAoG
          A1UECwwDT3BzMQ4wDAYDVQQDDAVhZG1pbjCCASIwDQYJKoZIhvcNAQEBBQADggEP
          ADCCAQoCggEBAMrm3BpWi8bWK+LGfTRedAC/xZ5hOnlDUedMCdjTQRSYdVeKPlFf
          1n7fkTGCyimpvA/tzknQHOgX72g2K6pbhgQJYIjm/a/0I2tVb1tMnio1l5wtnt0D
          M3NsscnhAsa1TPHVvI8V+NljpdEgpjUyA9F4nzppL/k8pHEIUdpan4Tp2VvbNrOz
          vs2crbMcUn+fmpjYjKv3nilcdBHfZYWz1oMoeuzFkgqc5igo4fyO8ySozd07huUf
          54UO1Wx2Fz9dCkyop/afuRg/0/FGnW0crhQgX1b8prwnqI1ajvJzVZbFGHGXMgDX
          V8stA1WTD/2d9fXQn0M0fbDP50CiG75e+0cCAwEAAaOCAkUwggJBMA4GA1UdDwEB
          /wQEAwIF4DAdBgNVHSUEFjAUBggrBgEFBQcDAgYIKwYBBQUHAwEwDAYDVR0TAQH/
          BAIwADAdBgNVHQ4EFgQU56zvVU3prpWbNx84pItcmVEAhU4wggHhBgNVHREEggHY
          MIIB1IIKa3ViZXJuZXRlc4ISa3ViZXJuZXRlcy5kZWZhdWx0ghZrdWJlcm5ldGVz
          LmRlZmF1bHQuc3ZjgiRrdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9j
          YWyCDmt1YmUtYXBpc2VydmVyggprdWJlLWFkbWlugglsb2NhbGhvc3SCC2V4YW1w
          bGUuY29tggdjb3Jlb3Mxggdjb3Jlb3Myggdjb3Jlb3Mzgg1jb3Jlb3MxLmxvY2Fs
          gg1jb3Jlb3MyLmxvY2Fsgg1jb3Jlb3MzLmxvY2FsghNjb3Jlb3MxLmV4YW1wbGUu
          Y29tghNjb3Jlb3MyLmV4YW1wbGUuY29tghNjb3Jlb3MzLmV4YW1wbGUuY29tggd3
          b3JrZXIxggd3b3JrZXIyggd3b3JrZXIzghN3b3JrZXIxLmV4YW1wbGUuY29tghN3
          b3JrZXIyLmV4YW1wbGUuY29tghN3b3JrZXIzLmV4YW1wbGUuY29thwR/AAABhwQA
          AAAAhwQKAwABhwQKAwAKhwQKAwAyhwSsFAABhwSsFAAChwSsFAALhwSsFAAMhwSs
          FAANhwSsFAAzhwSsFAA0hwSsFAA1gRFhZG1pbkBleGFtcGxlLmNvbTANBgkqhkiG
          9w0BAQsFAAOCAQEAoInSNFna4TsM6t8jAnkC0dQ3lsTETaRwQSfuBRGoxWo7j7Dq
          yXn4mXdPPnrpGKkWTTcFae1Fsfy1W0m6sPPuxOdccWiQqpadn4onl0UYgt/Bk2rY
          paqKvGy+i229DPG72AfwqNnSsBhZz84AYF/iF5HVh+MkhhxUjqGL8Yp6UZPZCgbg
          906EDZJVO111MPlGJ4aFI2YrvX6BazMP5UuiaW794Ips969t49g2SsJWYBZtruD9
          YoiPxcpn5C6YmZHy4JnGwLmwcU/S2V72NIumj0as3LimULAmZvFMojE95Y4Ususk
          QO0RGsfHBZfCP7BoLXaQuB1PSlcR+QbOSphVxQ==
          -----END CERTIFICATE-----

    - path: /etc/kubernetes/ssl/etcd-node-key.pem
      filesystem: root
      mode: 0644
      contents:
        inline: |
          -----BEGIN RSA PRIVATE KEY-----
          MIIEogIBAAKCAQEAyubcGlaLxtYr4sZ9NF50AL/FnmE6eUNR50wJ2NNBFJh1V4o+
          UV/Wft+RMYLKKam8D+3OSdAc6BfvaDYrqluGBAlgiOb9r/Qja1VvW0yeKjWXnC2e
          3QMzc2yxyeECxrVM8dW8jxX42WOl0SCmNTID0XifOmkv+TykcQhR2lqfhOnZW9s2
          s7O+zZytsxxSf5+amNiMq/eeKVx0Ed9lhbPWgyh67MWSCpzmKCjh/I7zJKjN3TuG
          5R/nhQ7VbHYXP10KTKin9p+5GD/T8UadbRyuFCBfVvymvCeojVqO8nNVlsUYcZcy
          ANdXyy0DVZMP/Z319dCfQzR9sM/nQKIbvl77RwIDAQABAoIBAFLeAprHKgMlSXsu
          8cfHo70ClaVftE/+TJ8YkRT7AqN0uMft8BGwAJyElnoQHpzxc5tV1mCTHJs121NG
          fILxKkTPx5tiK84G+chGdlplalt209q3TyCYxBSqGdqHiWi6dxh14LLXmHDAn+JP
          YVJsgN62UuG6QBucxtRbP4LcbDYNyQmKuocDgeEEEvvvHXmEQhsLONB4OFc1estS
          nPb7gAViBNhaKYIGnBVfkEg7OltGs2lDMUas+xReb9p5T3kcocE78+lZs8OSKYBg
          K+sTRNEvd+rCyjiT4lVwURcnlN6HIbwETxh9zramFj6Ffwv9BqFjuKKQF04/lRU4
          D0fPuyECgYEA+XNoANtAJMDRpaDHkVNpNs5/ew55j9Lyug7uMLMbTErHw2SIdFEr
          cJMz2PVhRJMw9m7rZaorbDIMusPNl0RZkz7AocI9GZN0fdTO1TTIuC+PST8BQVDI
          PW1X/LTLfGVXfZlVsJvHrZ7Xcv/uwlV1o+8FOOaTz6Q2EsalIi8Zu0kCgYEA0DqX
          UyJTklrvOR4dCceFc9ia8xazjSXATaO0swm4b+QAIjqQ/zs7CXdjM3Uimcoi8Qtu
          RYTPAsf3S1UwOAiEdgXMbfwX0a5mZyFxysCSF3qDpbqvMm2hAJC13CPm5YLNQ+TE
          Ap70jDt5/trHxazwYc3EtF267P+pT8Ds/2BC8g8CgYBRy+gEr+BerOOR/iCypLlR
          gXEH9v0hjjiNjivIyFJhN/w9NBASpDMsXPiZYg0dIW7iwAhsc9p9RgQqkd4uhfkh
          cWhVIo5KfrGqOUgBXaebzeycRg6xTj369ontkZNQHSMNSmRw3wQhCH75dLbj/oXu
          1YfO2r0JT31ztrObe/piEQKBgCAMlJP4GZLSKjXJW8DQk8rD0P2PRe14nQOWKc7Q
          tTGLjzW1e/G8xRZs6LjX046GHSCqmLtceJw9+OMAZp6JORINTGy1O1lLlXlUHXaO
          cy3n7nFIrYR+eSRkIYmTgQtcOYm0oTKiEpOu59UBCXR0bL8w85CrSIUHyKB82j1o
          LIWjAoGAb03OlhPICFOskhtarqKv/B3ReAfEyh9mcpn7qhYsLsErh7tlg1h8prlF
          rlpxkY9YOqCjqd9PkCdPagHnEU82HJ/eQrpOvLrpfgKlMUObEGgZymMlkRvbLxLy
          BHWWoS+BnhAQsl8WHValXW9Hm3c2zQJCmJcypA3mmr41AO0Z++o=
          -----END RSA PRIVATE KEY-----

    - path: /var/lib/etcd/ssl/etcd-node.pem
      filesystem: root
      mode: 0644
      contents:
        inline: |
          -----BEGIN CERTIFICATE-----
          MIIFiDCCBHCgAwIBAgIJAMZSQM9IPPJIMA0GCSqGSIb3DQEBCwUAMGAxCzAJBgNV
          BAYTAlVTMQswCQYDVQQIDAJOWTERMA8GA1UEBwwITmV3IFlvcmsxETAPBgNVBAoM
          CENvbXBhbnkxMQwwCgYDVQQLDANPcHMxEDAOBgNVBAMMB0t1YmUtQ0EwHhcNMTgx
          MjI0MjE1ODI0WhcNMjgxMjIxMjE1ODI0WjBeMQswCQYDVQQGEwJVUzELMAkGA1UE
          CAwCTlkxETAPBgNVBAcMCE5ldyBZb3JrMREwDwYDVQQKDAhDb21wYW55MTEMMAoG
          A1UECwwDT3BzMQ4wDAYDVQQDDAVhZG1pbjCCASIwDQYJKoZIhvcNAQEBBQADggEP
          ADCCAQoCggEBAMrm3BpWi8bWK+LGfTRedAC/xZ5hOnlDUedMCdjTQRSYdVeKPlFf
          1n7fkTGCyimpvA/tzknQHOgX72g2K6pbhgQJYIjm/a/0I2tVb1tMnio1l5wtnt0D
          M3NsscnhAsa1TPHVvI8V+NljpdEgpjUyA9F4nzppL/k8pHEIUdpan4Tp2VvbNrOz
          vs2crbMcUn+fmpjYjKv3nilcdBHfZYWz1oMoeuzFkgqc5igo4fyO8ySozd07huUf
          54UO1Wx2Fz9dCkyop/afuRg/0/FGnW0crhQgX1b8prwnqI1ajvJzVZbFGHGXMgDX
          V8stA1WTD/2d9fXQn0M0fbDP50CiG75e+0cCAwEAAaOCAkUwggJBMA4GA1UdDwEB
          /wQEAwIF4DAdBgNVHSUEFjAUBggrBgEFBQcDAgYIKwYBBQUHAwEwDAYDVR0TAQH/
          BAIwADAdBgNVHQ4EFgQU56zvVU3prpWbNx84pItcmVEAhU4wggHhBgNVHREEggHY
          MIIB1IIKa3ViZXJuZXRlc4ISa3ViZXJuZXRlcy5kZWZhdWx0ghZrdWJlcm5ldGVz
          LmRlZmF1bHQuc3ZjgiRrdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9j
          YWyCDmt1YmUtYXBpc2VydmVyggprdWJlLWFkbWlugglsb2NhbGhvc3SCC2V4YW1w
          bGUuY29tggdjb3Jlb3Mxggdjb3Jlb3Myggdjb3Jlb3Mzgg1jb3Jlb3MxLmxvY2Fs
          gg1jb3Jlb3MyLmxvY2Fsgg1jb3Jlb3MzLmxvY2FsghNjb3Jlb3MxLmV4YW1wbGUu
          Y29tghNjb3Jlb3MyLmV4YW1wbGUuY29tghNjb3Jlb3MzLmV4YW1wbGUuY29tggd3
          b3JrZXIxggd3b3JrZXIyggd3b3JrZXIzghN3b3JrZXIxLmV4YW1wbGUuY29tghN3
          b3JrZXIyLmV4YW1wbGUuY29tghN3b3JrZXIzLmV4YW1wbGUuY29thwR/AAABhwQA
          AAAAhwQKAwABhwQKAwAKhwQKAwAyhwSsFAABhwSsFAAChwSsFAALhwSsFAAMhwSs
          FAANhwSsFAAzhwSsFAA0hwSsFAA1gRFhZG1pbkBleGFtcGxlLmNvbTANBgkqhkiG
          9w0BAQsFAAOCAQEAoInSNFna4TsM6t8jAnkC0dQ3lsTETaRwQSfuBRGoxWo7j7Dq
          yXn4mXdPPnrpGKkWTTcFae1Fsfy1W0m6sPPuxOdccWiQqpadn4onl0UYgt/Bk2rY
          paqKvGy+i229DPG72AfwqNnSsBhZz84AYF/iF5HVh+MkhhxUjqGL8Yp6UZPZCgbg
          906EDZJVO111MPlGJ4aFI2YrvX6BazMP5UuiaW794Ips969t49g2SsJWYBZtruD9
          YoiPxcpn5C6YmZHy4JnGwLmwcU/S2V72NIumj0as3LimULAmZvFMojE95Y4Ususk
          QO0RGsfHBZfCP7BoLXaQuB1PSlcR+QbOSphVxQ==
          -----END CERTIFICATE-----

    - path: /var/lib/etcd/ssl/etcd-node-key.pem
      filesystem: root
      mode: 0644
      contents:
        inline: |
          -----BEGIN RSA PRIVATE KEY-----
          MIIEogIBAAKCAQEAyubcGlaLxtYr4sZ9NF50AL/FnmE6eUNR50wJ2NNBFJh1V4o+
          UV/Wft+RMYLKKam8D+3OSdAc6BfvaDYrqluGBAlgiOb9r/Qja1VvW0yeKjWXnC2e
          3QMzc2yxyeECxrVM8dW8jxX42WOl0SCmNTID0XifOmkv+TykcQhR2lqfhOnZW9s2
          s7O+zZytsxxSf5+amNiMq/eeKVx0Ed9lhbPWgyh67MWSCpzmKCjh/I7zJKjN3TuG
          5R/nhQ7VbHYXP10KTKin9p+5GD/T8UadbRyuFCBfVvymvCeojVqO8nNVlsUYcZcy
          ANdXyy0DVZMP/Z319dCfQzR9sM/nQKIbvl77RwIDAQABAoIBAFLeAprHKgMlSXsu
          8cfHo70ClaVftE/+TJ8YkRT7AqN0uMft8BGwAJyElnoQHpzxc5tV1mCTHJs121NG
          fILxKkTPx5tiK84G+chGdlplalt209q3TyCYxBSqGdqHiWi6dxh14LLXmHDAn+JP
          YVJsgN62UuG6QBucxtRbP4LcbDYNyQmKuocDgeEEEvvvHXmEQhsLONB4OFc1estS
          nPb7gAViBNhaKYIGnBVfkEg7OltGs2lDMUas+xReb9p5T3kcocE78+lZs8OSKYBg
          K+sTRNEvd+rCyjiT4lVwURcnlN6HIbwETxh9zramFj6Ffwv9BqFjuKKQF04/lRU4
          D0fPuyECgYEA+XNoANtAJMDRpaDHkVNpNs5/ew55j9Lyug7uMLMbTErHw2SIdFEr
          cJMz2PVhRJMw9m7rZaorbDIMusPNl0RZkz7AocI9GZN0fdTO1TTIuC+PST8BQVDI
          PW1X/LTLfGVXfZlVsJvHrZ7Xcv/uwlV1o+8FOOaTz6Q2EsalIi8Zu0kCgYEA0DqX
          UyJTklrvOR4dCceFc9ia8xazjSXATaO0swm4b+QAIjqQ/zs7CXdjM3Uimcoi8Qtu
          RYTPAsf3S1UwOAiEdgXMbfwX0a5mZyFxysCSF3qDpbqvMm2hAJC13CPm5YLNQ+TE
          Ap70jDt5/trHxazwYc3EtF267P+pT8Ds/2BC8g8CgYBRy+gEr+BerOOR/iCypLlR
          gXEH9v0hjjiNjivIyFJhN/w9NBASpDMsXPiZYg0dIW7iwAhsc9p9RgQqkd4uhfkh
          cWhVIo5KfrGqOUgBXaebzeycRg6xTj369ontkZNQHSMNSmRw3wQhCH75dLbj/oXu
          1YfO2r0JT31ztrObe/piEQKBgCAMlJP4GZLSKjXJW8DQk8rD0P2PRe14nQOWKc7Q
          tTGLjzW1e/G8xRZs6LjX046GHSCqmLtceJw9+OMAZp6JORINTGy1O1lLlXlUHXaO
          cy3n7nFIrYR+eSRkIYmTgQtcOYm0oTKiEpOu59UBCXR0bL8w85CrSIUHyKB82j1o
          LIWjAoGAb03OlhPICFOskhtarqKv/B3ReAfEyh9mcpn7qhYsLsErh7tlg1h8prlF
          rlpxkY9YOqCjqd9PkCdPagHnEU82HJ/eQrpOvLrpfgKlMUObEGgZymMlkRvbLxLy
          BHWWoS+BnhAQsl8WHValXW9Hm3c2zQJCmJcypA3mmr41AO0Z++o=
          -----END RSA PRIVATE KEY-----

    - path: /etc/kubernetes/ssl/worker.pem
      filesystem: root
      mode: 0644
      contents:
        inline: |
          -----BEGIN CERTIFICATE-----
          MIIFiDCCBHCgAwIBAgIJAMZSQM9IPPJIMA0GCSqGSIb3DQEBCwUAMGAxCzAJBgNV
          BAYTAlVTMQswCQYDVQQIDAJOWTERMA8GA1UEBwwITmV3IFlvcmsxETAPBgNVBAoM
          CENvbXBhbnkxMQwwCgYDVQQLDANPcHMxEDAOBgNVBAMMB0t1YmUtQ0EwHhcNMTgx
          MjI0MjE1ODI0WhcNMjgxMjIxMjE1ODI0WjBeMQswCQYDVQQGEwJVUzELMAkGA1UE
          CAwCTlkxETAPBgNVBAcMCE5ldyBZb3JrMREwDwYDVQQKDAhDb21wYW55MTEMMAoG
          A1UECwwDT3BzMQ4wDAYDVQQDDAVhZG1pbjCCASIwDQYJKoZIhvcNAQEBBQADggEP
          ADCCAQoCggEBAMrm3BpWi8bWK+LGfTRedAC/xZ5hOnlDUedMCdjTQRSYdVeKPlFf
          1n7fkTGCyimpvA/tzknQHOgX72g2K6pbhgQJYIjm/a/0I2tVb1tMnio1l5wtnt0D
          M3NsscnhAsa1TPHVvI8V+NljpdEgpjUyA9F4nzppL/k8pHEIUdpan4Tp2VvbNrOz
          vs2crbMcUn+fmpjYjKv3nilcdBHfZYWz1oMoeuzFkgqc5igo4fyO8ySozd07huUf
          54UO1Wx2Fz9dCkyop/afuRg/0/FGnW0crhQgX1b8prwnqI1ajvJzVZbFGHGXMgDX
          V8stA1WTD/2d9fXQn0M0fbDP50CiG75e+0cCAwEAAaOCAkUwggJBMA4GA1UdDwEB
          /wQEAwIF4DAdBgNVHSUEFjAUBggrBgEFBQcDAgYIKwYBBQUHAwEwDAYDVR0TAQH/
          BAIwADAdBgNVHQ4EFgQU56zvVU3prpWbNx84pItcmVEAhU4wggHhBgNVHREEggHY
          MIIB1IIKa3ViZXJuZXRlc4ISa3ViZXJuZXRlcy5kZWZhdWx0ghZrdWJlcm5ldGVz
          LmRlZmF1bHQuc3ZjgiRrdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9j
          YWyCDmt1YmUtYXBpc2VydmVyggprdWJlLWFkbWlugglsb2NhbGhvc3SCC2V4YW1w
          bGUuY29tggdjb3Jlb3Mxggdjb3Jlb3Myggdjb3Jlb3Mzgg1jb3Jlb3MxLmxvY2Fs
          gg1jb3Jlb3MyLmxvY2Fsgg1jb3Jlb3MzLmxvY2FsghNjb3Jlb3MxLmV4YW1wbGUu
          Y29tghNjb3Jlb3MyLmV4YW1wbGUuY29tghNjb3Jlb3MzLmV4YW1wbGUuY29tggd3
          b3JrZXIxggd3b3JrZXIyggd3b3JrZXIzghN3b3JrZXIxLmV4YW1wbGUuY29tghN3
          b3JrZXIyLmV4YW1wbGUuY29tghN3b3JrZXIzLmV4YW1wbGUuY29thwR/AAABhwQA
          AAAAhwQKAwABhwQKAwAKhwQKAwAyhwSsFAABhwSsFAAChwSsFAALhwSsFAAMhwSs
          FAANhwSsFAAzhwSsFAA0hwSsFAA1gRFhZG1pbkBleGFtcGxlLmNvbTANBgkqhkiG
          9w0BAQsFAAOCAQEAoInSNFna4TsM6t8jAnkC0dQ3lsTETaRwQSfuBRGoxWo7j7Dq
          yXn4mXdPPnrpGKkWTTcFae1Fsfy1W0m6sPPuxOdccWiQqpadn4onl0UYgt/Bk2rY
          paqKvGy+i229DPG72AfwqNnSsBhZz84AYF/iF5HVh+MkhhxUjqGL8Yp6UZPZCgbg
          906EDZJVO111MPlGJ4aFI2YrvX6BazMP5UuiaW794Ips969t49g2SsJWYBZtruD9
          YoiPxcpn5C6YmZHy4JnGwLmwcU/S2V72NIumj0as3LimULAmZvFMojE95Y4Ususk
          QO0RGsfHBZfCP7BoLXaQuB1PSlcR+QbOSphVxQ==
          -----END CERTIFICATE-----
          -----BEGIN CERTIFICATE-----
          MIIDhTCCAm2gAwIBAgIJAPdp2fqmRedeMA0GCSqGSIb3DQEBCwUAMGAxCzAJBgNV
          BAYTAlVTMQswCQYDVQQIDAJOWTERMA8GA1UEBwwITmV3IFlvcmsxETAPBgNVBAoM
          CENvbXBhbnkxMQwwCgYDVQQLDANPcHMxEDAOBgNVBAMMB0t1YmUtQ0EwHhcNMTgx
          MjI0MjE1ODI0WhcNMjgxMjIxMjE1ODI0WjBgMQswCQYDVQQGEwJVUzELMAkGA1UE
          CAwCTlkxETAPBgNVBAcMCE5ldyBZb3JrMREwDwYDVQQKDAhDb21wYW55MTEMMAoG
          A1UECwwDT3BzMRAwDgYDVQQDDAdLdWJlLUNBMIIBIjANBgkqhkiG9w0BAQEFAAOC
          AQ8AMIIBCgKCAQEAozecwrUpvaWzE0uykH4LLRX+C3fiJDVSmkwS+vlYbiuyiKmK
          SrWQnfI7ahytZgqcgT686MOTdSaAioZF6BHtlNDqwmtH2s7OrBjRMf07arYla1og
          6eu5cz+/GcL/2K7ysq7nr0WAm7SS52seAyA0bg9vHy5LWLEZ10B8sMTliIBkyJoe
          SH65MFDiCkn0sWB/bgYQiMq/3Z9kUAf/lX7PQRVOxEru3d4gpbsK+3GD6yTPXT4B
          3z+8PjYeIw5QNphdM3zOFd9NidwyGYwk5DLBsHQRAqhsm1lhBC3+JiaJ5knFdzje
          yPg55DyfKnYjRgEUn9VxyqIfHwl9W8HcZoVzOwIDAQABo0IwQDAOBgNVHQ8BAf8E
          BAMCAQYwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUaPVBptTGkvBrW2aDMKjr
          Pvs6dEYwDQYJKoZIhvcNAQELBQADggEBAH4yCCAGcurjSa4UzXGL6Z+kd1M3u9at
          ZbpOVvBKpCaHj7Lsgoz9neKHHVboRRbdv9KYkNRqmotz4tpvZQ9nXwaTXjdzw7+X
          /OgpnTFR8dx8zjnoB8UfN0atdRaaTzDa0XuDTJh7jqPQDX+BVu3UZKb6y4L7CrpN
          RHiTpYE1AFCEFrtptdyFHANWJb+PN+6tEpSt7l+2vv6/Ej+nCXiG1surm5yfllj6
          ugT0hxfPMefWWE5lxloR6atG87rJsonuRVWOao1uz+TLeGEPRAGQSlXPT6ux9hko
          m3vmP/B6qA48oVaJYYg3XN0WzWX6W+qy5mNuxAzBcvkD08WCBmV4lwQ=
          -----END CERTIFICATE-----

    - path: /etc/kubernetes/ssl/worker-key.pem
      filesystem: root
      mode: 0644
      contents:
        inline: |
          -----BEGIN RSA PRIVATE KEY-----
          MIIEogIBAAKCAQEAyubcGlaLxtYr4sZ9NF50AL/FnmE6eUNR50wJ2NNBFJh1V4o+
          UV/Wft+RMYLKKam8D+3OSdAc6BfvaDYrqluGBAlgiOb9r/Qja1VvW0yeKjWXnC2e
          3QMzc2yxyeECxrVM8dW8jxX42WOl0SCmNTID0XifOmkv+TykcQhR2lqfhOnZW9s2
          s7O+zZytsxxSf5+amNiMq/eeKVx0Ed9lhbPWgyh67MWSCpzmKCjh/I7zJKjN3TuG
          5R/nhQ7VbHYXP10KTKin9p+5GD/T8UadbRyuFCBfVvymvCeojVqO8nNVlsUYcZcy
          ANdXyy0DVZMP/Z319dCfQzR9sM/nQKIbvl77RwIDAQABAoIBAFLeAprHKgMlSXsu
          8cfHo70ClaVftE/+TJ8YkRT7AqN0uMft8BGwAJyElnoQHpzxc5tV1mCTHJs121NG
          fILxKkTPx5tiK84G+chGdlplalt209q3TyCYxBSqGdqHiWi6dxh14LLXmHDAn+JP
          YVJsgN62UuG6QBucxtRbP4LcbDYNyQmKuocDgeEEEvvvHXmEQhsLONB4OFc1estS
          nPb7gAViBNhaKYIGnBVfkEg7OltGs2lDMUas+xReb9p5T3kcocE78+lZs8OSKYBg
          K+sTRNEvd+rCyjiT4lVwURcnlN6HIbwETxh9zramFj6Ffwv9BqFjuKKQF04/lRU4
          D0fPuyECgYEA+XNoANtAJMDRpaDHkVNpNs5/ew55j9Lyug7uMLMbTErHw2SIdFEr
          cJMz2PVhRJMw9m7rZaorbDIMusPNl0RZkz7AocI9GZN0fdTO1TTIuC+PST8BQVDI
          PW1X/LTLfGVXfZlVsJvHrZ7Xcv/uwlV1o+8FOOaTz6Q2EsalIi8Zu0kCgYEA0DqX
          UyJTklrvOR4dCceFc9ia8xazjSXATaO0swm4b+QAIjqQ/zs7CXdjM3Uimcoi8Qtu
          RYTPAsf3S1UwOAiEdgXMbfwX0a5mZyFxysCSF3qDpbqvMm2hAJC13CPm5YLNQ+TE
          Ap70jDt5/trHxazwYc3EtF267P+pT8Ds/2BC8g8CgYBRy+gEr+BerOOR/iCypLlR
          gXEH9v0hjjiNjivIyFJhN/w9NBASpDMsXPiZYg0dIW7iwAhsc9p9RgQqkd4uhfkh
          cWhVIo5KfrGqOUgBXaebzeycRg6xTj369ontkZNQHSMNSmRw3wQhCH75dLbj/oXu
          1YfO2r0JT31ztrObe/piEQKBgCAMlJP4GZLSKjXJW8DQk8rD0P2PRe14nQOWKc7Q
          tTGLjzW1e/G8xRZs6LjX046GHSCqmLtceJw9+OMAZp6JORINTGy1O1lLlXlUHXaO
          cy3n7nFIrYR+eSRkIYmTgQtcOYm0oTKiEpOu59UBCXR0bL8w85CrSIUHyKB82j1o
          LIWjAoGAb03OlhPICFOskhtarqKv/B3ReAfEyh9mcpn7qhYsLsErh7tlg1h8prlF
          rlpxkY9YOqCjqd9PkCdPagHnEU82HJ/eQrpOvLrpfgKlMUObEGgZymMlkRvbLxLy
          BHWWoS+BnhAQsl8WHValXW9Hm3c2zQJCmJcypA3mmr41AO0Z++o=
          -----END RSA PRIVATE KEY-----

    - path: /etc/profile.d/aliases.sh
      filesystem: root
      mode: 0755
      contents:
        inline: |
          dps () { docker ps -a ; }
          dl () { docker logs -f $1 & }
          drm () { docker stop $1 && docker rm $1; }
          PATH=$PATH:/opt/bin
    - path: /etc/flannel/options.env
      filesystem: root
      mode: 0644
      contents:
        inline: |
          # ETCDCTL parameters
          ADVERTISE_IP=${ADVERTISE_IP}
          ETCDCTL_CA_FILE=/etc/ssl/certs/ca.pem
          ETCDCTL_CERT_FILE=/var/lib/etcd/ssl/etcd-node.pem
          ETCDCTL_KEY_FILE=/var/lib/etcd/ssl/etcd-node-key.pem
          ETCDCTL_ENDPOINTS="https://172.20.0.11:2379,https://172.20.0.12:2379,https://172.20.0.13:2379"
          FLANNELD_IFACE="enp0s3"
          FLANNELD_ETCD_ENDPOINTS=${ETCDCTL_ENDPOINTS}
          FLANNELD_ETCD_PREFIX="/coreos.com/network"
          #HTTP_PROXY=
          #HTTPS_PROXY=
          ##http_proxy=
          ##https_proxy=
          no_proxy=localhost,127.0.0.0/8,127.0.0.1,::1,172.20.0.11,172.20.0.12,172.20.0.13,coreos1,coreos2,coreos3,coreos1.example.com,coreos2.example.com,coreos3.example.com,/var/run/docker.sock
    - path: /etc/systemd/system/docker.service.d/40-flannel.conf
      filesystem: root
      mode: 0644
      contents:
        inline: |
          [Unit]
          Requires=flanneld.service
          After=flanneld.service
          [Service]
          EnvironmentFile=/etc/kubernetes/cni/docker_opts_cni.env
    - path: /etc/kubernetes/cni/docker_opts_cni.env
      filesystem: root
      mode: 0644
      contents:
        inline: |
          DOCKER_OPT_BIP=""
          DOCKER_OPT_IPMASQ=""
    - path: /etc/kubernetes/cni/net.d/10-containernet.conf
      filesystem: root
      mode: 0644
      contents:
        inline: |
          {
              "name": "podnet",
              "type": "flannel",
              "delegate": {
                  "forceAddress": true,
                  "isDefaultGateway": true,
                  "hairpinMode": true
              }
          }
    - path: /etc/systemd/system/flanneld.service.d/40-ExecStartPre-symlink.conf
      filesystem: root
      mode: 0644
      contents:
        inline: |
          [Service]
          ExecStartPre=/usr/bin/ln -sf /etc/flannel/options.env /run/flannel/options.env
          ExecStartPre=/usr/bin/ln -sf /etc/kubernetes/cni/net.d /etc/rkt/net.d
          ExecStartPre=/usr/bin/ln -sf /etc/kubernetes/ssl /etc/kubernetes/pki
    - path: /etc/kubernetes/kubelet.env
      filesystem: root
      mode: 0644
      contents:
        inline: |
          KUBELET_IMAGE_URL=gcr.io/google_containers/hyperkube
          KUBELET_VERSION=v1.13.1
    - path: /etc/kubernetes/ssl/kubeconfig.yaml 
      filesystem: root
      mode: 0644
      contents:
        inline: |
          apiVersion: v1
          kind: Config
          clusters:
          - name: local
            cluster:
              server: https://172.20.0.11:443
              certificate-authority: /etc/kubernetes/ssl/ca.pem
          users:
          - name: kubelet
            user:
              client-certificate: /etc/kubernetes/ssl/etcd-node.pem
              client-key: /etc/kubernetes/ssl/etcd-node-key.pem
          contexts:
          - context:
              cluster: local
              user: kubelet
    - path: /etc/kubernetes/ssl/bootstrap-kubeconfig.yaml
      filesystem: root
      mode: 0644
      contents:
        inline: |
          apiVersion: v1
          kind: Config
          clusters:
          - name: local
            cluster:
              certificate-authority: /etc/kubernetes/ssl/ca.pem
              server: https://172.20.0.11:443
          contexts:
          - context:
              cluster: local
              user: tls-bootstrap-token-user
            name: tls-bootstrap-token-user@kubernets
          current-context: tls-bootstrap-token-user@kubernets
          preferences: {}
          users:
          - name: tls-bootstrap-token-user
            user:
              token: d6759f25863342e68afb0b2eab2027cd
    - path: /etc/kubernetes/ssl/token-bootstrap-auth.csv
      filesystem: root
      mode: 0644
      contents:
        inline: |
          d6759f25863342e68afb0b2eab2027cd,kubelet-bootstrap,10001,'system:node-bootstrapper'
    - path: /etc/kubernetes/config.yaml
      filesystem: root
      mode: 0644
      contents:
        inline: |
          address: 0.0.0.0
          apiVersion: kubelet.config.k8s.io/v1beta1
          authentication:
            anonymous:
              enabled: false
            webhook:
              cacheTTL: 2m0s
              enabled: true
            x509:
              clientCAFile: /etc/kubernetes/ssl/ca.pem
          authorization:
            mode: Webhook
            webhook:
              cacheAuthorizedTTL: 5m0s
              cacheUnauthorizedTTL: 30s
          cgroupDriver: cgroupfs
          cgroupsPerQOS: true
          clusterDNS:
          - 10.3.0.10
          clusterDomain: cluster.local
          containerLogMaxFiles: 5
          containerLogMaxSize: 10Mi
          contentType: application/vnd.kubernetes.protobuf
          cpuCFSQuota: true
          cpuManagerPolicy: none
          cpuManagerReconcilePeriod: 10s
          enableControllerAttachDetach: true
          enableDebuggingHandlers: true
          enforceNodeAllocatable:
          - pods
          eventBurst: 10
          eventRecordQPS: 5
          evictionHard:
            imagefs.available: 15%
            memory.available: 100Mi
            nodefs.available: 10%
            nodefs.inodesFree: 5%
          evictionPressureTransitionPeriod: 5m0s
          failSwapOn: true
          fileCheckFrequency: 20s
          hairpinMode: promiscuous-bridge
          healthzBindAddress: 127.0.0.1
          healthzPort: 10248
          httpCheckFrequency: 20s
          imageGCHighThresholdPercent: 85
          imageGCLowThresholdPercent: 80
          imageMinimumGCAge: 2m0s
          iptablesDropBit: 15
          iptablesMasqueradeBit: 14
          kind: KubeletConfiguration
          tlsCertFile: "/etc/kubernetes/ssl/etcd-node.pem"
          tlsPrivateKeyFile: "/etc/kubernetes/ssl/etcd-node-key.pem"
          RotateCertificates: true
          ServerTLSBootstrap: true
          kubeAPIBurst: 10
          kubeAPIQPS: 5
          makeIPTablesUtilChains: true
          maxOpenFiles: 1000000
          maxPods: 110
          nodeStatusUpdateFrequency: 10s
          oomScoreAdj: -999
          podPidsLimit: -1
          port: 10250
          registryBurst: 10
          registryPullQPS: 5
          resolvConf: /etc/resolv.conf
          rotateCertificates: true
          runtimeRequestTimeout: 2m0s
          serializeImagePulls: true
          staticPodPath: /etc/kubernetes/manifests
          streamingConnectionIdleTimeout: 4h0m0s
          syncFrequency: 1m0s
          volumeStatsAggPeriod: 1m0s
    - path: /etc/kubernetes/manifests/kube-apiserver.yaml
      filesystem: root
      mode: 0644
      contents:
        inline: |
          apiVersion: v1
          kind: Pod
          metadata:
            name: kube-apiserver
            namespace: kube-system
          spec:
            hostNetwork: true
            containers:
            - name: kube-apiserver
              image: gcr.io/google_containers/hyperkube:v1.13.1
              command:
              - /hyperkube
              - apiserver
              - --bind-address=0.0.0.0
              - --etcd-servers=https://172.20.0.11:2379,https://172.20.0.12:2379,https://172.20.0.13:2379
              - --allow-privileged=true
              - --service-cluster-ip-range=10.3.0.0/21
              - --secure-port=443
              - --advertise-address=172.20.0.11
              - --storage-backend=etcd3
              - --storage-media-type=application/json
              - --admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,ResourceQuota,DefaultStorageClass,PersistentVolumeLabel
              #- --admission-control=Initializers,NamespaceLifecycle,LimitRanger,ServiceAccount,PersistentVolumeLabel,DefaultStorageClass,DefaultTolerationSeconds,NodeRestriction,ResourceQuotaInitializers,NamespaceLifecycle,LimitRanger,ServiceAccount,PersistentVolumeLabel,DefaultStorageClass,DefaultTolerationSeconds,NodeRestriction,ResourceQuota
              - --etcd-certfile=/var/lib/etcd/ssl/etcd-node.pem
              - --etcd-keyfile=/var/lib/etcd/ssl/etcd-node-key.pem
              - --tls-cert-file=/var/lib/etcd/ssl/etcd-node.pem
              - --tls-private-key-file=/var/lib/etcd/ssl/etcd-node-key.pem
              - --kubelet-certificate-authority=/etc/kubernetes/ssl/ca.pem
              - --kubelet-client-certificate=/var/lib/etcd/ssl/etcd-node.pem
              - --kubelet-client-key=/var/lib/etcd/ssl/etcd-node-key.pem
              - --service-account-key-file=/var/lib/etcd/ssl/etcd-node-key.pem
              - --etcd-cafile=/var/lib/etcd/ssl/ca.pem
              - --client-ca-file=/var/lib/etcd/ssl/ca.pem
              - --runtime-config=extensions/v1beta1/networkpolicies=true,extensions/v1beta1=true,rbac.authorization.k8s.io/v1
              - --authorization-mode=Node,RBAC
              - --token-auth-file=/etc/kubernetes/ssl/token-bootstrap-auth.csv
              - --anonymous-auth=false
              - --audit-log-path=/var/log/kubernetes/kube-apiserver-audit.log
              - --audit-log-maxage=30
              - --audit-log-maxbackup=3
              - --audit-log-maxsize=100
              - --v=3
              livenessProbe:
                httpGet:
                  host: 127.0.0.1
                  port: 8080
                  path: /healthz
                initialDelaySeconds: 15
                timeoutSeconds: 15
              ports:
              - containerPort: 443
                hostPort: 443
                name: https
              - containerPort: 8080
                hostPort: 8080
                name: local
              volumeMounts:
              - mountPath: /etc/kubernetes/ssl
                name: ssl-certs-kubernetes
                readOnly: true
              - mountPath: /var/lib/etcd/ssl
                name: ssl-certs-etcd
                readOnly: true
              - mountPath: /etc/ssl/certs
                name: ssl-certs-host
                readOnly: true
              - mountPath: /var/log/kubernetes
                name: var-log-kubernetes
                readOnly: false
            volumes:
            - hostPath:
                path: /etc/kubernetes/ssl
              name: ssl-certs-kubernetes
            - hostPath:
                path: /var/lib/etcd/ssl
              name: ssl-certs-etcd
            - hostPath:
                path: /usr/share/ca-certificates
              name: ssl-certs-host
            - hostPath:
                path: /var/log/kubernetes
              name: var-log-kubernetes

    - path: /etc/kubernetes/manifests/kube-controller-manager.yaml
      filesystem: root
      mode: 0644
      contents:
        inline: |
          apiVersion: v1
          kind: Pod
          metadata:
            name: kube-controller-manager
            namespace: kube-system
          spec:
                hostNetwork: true
                containers:
                - name: kube-controller-manager
                  image: gcr.io/google_containers/hyperkube:v1.13.1
                  command:
                  - ./hyperkube
                  - controller-manager
                  - --master=https://172.20.0.11:443
                  - --kubeconfig=/etc/kubernetes/ssl/kubeconfig.yaml
                  - --authentication-kubeconfig=/etc/kubernetes/ssl/kubeconfig.yaml
                  - --authorization-kubeconfig=/etc/kubernetes/ssl/kubeconfig.yaml
                  - --client-ca-file=/etc/kubernetes/ssl/ca.pem
                  - --leader-elect=true
                  - --allocate-node-cidrs=true
                  - --cluster-cidr=10.20.0.0/20
                  - --service-cluster-ip-range=10.3.0.0/21
                  - --root-ca-file=/etc/kubernetes/ssl/ca.pem
                  - --tls-cert-file=/etc/kubernetes/ssl/ca.pem
                  - --tls-private-key-file=/etc/kubernetes/ssl/ca-key.pem
                  - --cluster-signing-cert-file=/etc/kubernetes/ssl/ca.pem
                  - --cluster-signing-key-file=/etc/kubernetes/ssl/ca-key.pem
                  - --service-account-private-key-file=/etc/kubernetes/ssl/etcd-node-key.pem
                  - --use-service-account-credentials=true
                  - --experimental-cluster-signing-duration=87600h0m0s
                  livenessProbe:
                    httpGet:
                      host: 127.0.0.1
                      path: /healthz
                      port: 10252  # Note: Using default port. Update if --port option is set differently.
                    initialDelaySeconds: 15
                    timeoutSeconds: 5
                  volumeMounts:
                  - mountPath: /etc/ssl/certs
                    name: ssl-host
                    readOnly: true
                  - mountPath: /var/log/kube-controller-manager.log
                    name: logfile
                    readOnly: false
                  - mountPath: /etc/kubernetes/ssl
                    name: "kube-ssl"
                    readOnly: true
                volumes:
                - hostPath:
                    path: /usr/share/ca-certificates
                  name: ssl-host
                - hostPath:
                    path: /var/log/kube-controller-manager.log
                  name: logfile
                - hostPath:
                    path: "/etc/kubernetes/ssl"
                  name: "kube-ssl"

    - path: /etc/kubernetes/manifests/kube-proxy.yaml
      filesystem: root
      mode: 0644
      contents:
        inline: |
          apiVersion: v1
          kind: Pod
          metadata:
            name: kube-proxy
            namespace: kube-system
            labels:
              tier: node
              k8s-app: kube-proxy
          spec:
                hostNetwork: true
                containers:
                - name: kube-proxy
                  image: gcr.io/google_containers/hyperkube:v1.13.1
                  command:
                  - ./hyperkube
                  - proxy
                  - --master=https://172.20.0.11:443
                  - --kubeconfig=/etc/kubernetes/ssl/kubeconfig.yaml
                  - --logtostderr=true
                  - --proxy-mode=iptables
                  - --masquerade-all
                  - --hostname-override=172.20.0.11
                  - --cluster-cidr=10.20.0.0/20
                  - --v=3
                  env:
                    - name: NODE_NAME
                      valueFrom:
                        fieldRef:
                          fieldPath: spec.nodeName
                  securityContext:
                    privileged: true
                  volumeMounts:
                  - mountPath: /etc/ssl/certs
                    name: ssl-certs-host
                    readOnly: true
                  - name: kube-ssl
                    mountPath: /etc/kubernetes/ssl
                    readOnly: true
                tolerations:
                - key: "node-role.kubernetes.io/master"
                  operator: "Exists"
                  effect: "NoSchedule"
                volumes:
                - hostPath:
                    path: /usr/share/ca-certificates
                  name: ssl-certs-host
                - name: kube-ssl
                  hostPath:
                    path: /etc/kubernetes/ssl

    - path: /etc/kubernetes/manifests/kube-scheduler.yaml
      filesystem: root
      mode: 0644
      contents:
        inline: |
          apiVersion: v1
          kind: Pod
          metadata:
            name: kube-scheduler
            namespace: kube-system
          spec:
            hostNetwork: true
            containers:
            - name: kube-scheduler
              image: gcr.io/google_containers/hyperkube:v1.13.1
              command:
              - ./hyperkube
              - scheduler
              - --master=https://172.20.0.11:443
              - --kubeconfig=/etc/kubernetes/ssl/kubeconfig.yaml
              - --address=0.0.0.0
              - --leader-elect=true
              - --v=3
              livenessProbe:
                  httpGet:
                    host: 127.0.0.1
                    path: /healthz
                    port: 10251  # Note: Using default port. Update if --port option is set differently.
                  initialDelaySeconds: 15
                  timeoutSeconds: 15
              nodeSelector:
                node-role.kubernetes.io/master: ""
              securityContext:
                runAsNonRoot: true
                runAsUser: 65534
              volumeMounts:
              - mountPath: /var/log/kube-scheduler.log
                name: logfile
              - mountPath: /etc/kubernetes/ssl
                name: "kube-ssl"
                readOnly: true
            volumes:
            - hostPath:
                path: /var/log/kube-scheduler.log
              name: logfile
            - hostPath:
                path: "/etc/kubernetes/ssl"
              name: "kube-ssl"


passwd:
  users:
    - name: usera
      password_hash: "$6$3c8a997b76b84785$wbGnNGuEaW9kbiiU7ubyimnGvIaFhrPhjzzP4vuka1upxdUZa1xrs4zsiGIlfBeJ2Zu1CkhZjT0zeCqJyrniQ1"
      ssh_authorized_keys:
        - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDCkOhUhPzzbYHKX9wHTi7zT+Xwpcje2nnhkqjXInjPKbNAOyHH3gNkaBKHAmZEGLi5Va3O4GtZUqVUcsAhJi8bCyA1Fqbz0JCvuDuwh1S3vvLM3uJmUqW69ooWthJziLUR2V6Y/rqAo+m/xjF8LHlZXuGnQzq4lBcr03t2onUntIUXXTQnZ3Zx8hGaVeeADur4L++As/W+x39nVm7n+d3JNJXf8MFaX5EtgAkvjWu0e1IaMQUJ8L02GnI7HSyrn4XTqeopzvQb/QS0ReebtM3OthlBOb42K7NOEp8fJt0g9n1WBPAQvfW0R6QaSrvWDjHVMcI4UsSMyW/HOvETt3CT"
      home_dir: /home/usera
      groups:
        - sudo
        - docker
      shell: /bin/bash

systemd:
  units:
    - name: etcd-member.service
      dropins:
        - name: conf1.conf
          contents: |
            [Service]
            EnvironmentFile=/etc/flannel/options.env

    - name: docker-tcp.socket
      enabled: false
      contents: |
        [Unit]
        Description=Docker Socket for the API

        [Socket]
        ListenStream=2375
        BindIPv6Only=both
        Service=docker.service

        [Install]
        WantedBy=sockets.target

    - name: docker.service
      enabled: false
      dropins:
        - name: 50-insecure-registry.conf
          contents: |
            [Service]
            Environment=DOCKER_OPTS=''
            #Environment=#HTTP_PROXY=
            #Environment=#HTTPS_PROXY=
            #Environment=##http_proxy=
            #Environment=##https_proxy=
            #Environment=no_proxy=localhost,127.0.0.0/8,127.0.0.1,::1,172.20.0.11,172.20.0.12,172.20.0.13,coreos1,coreos2,coreos3,coreos1.example.com,coreos2.example.com,coreos3.example.com,/var/run/docker.sock

    - name: etcd-member.service
      enable: true

    - name: flanneld.service
      dropins:
        - name: 50-network-config.conf
          contents: |
            [Service]
            EnvironmentFile=/etc/flannel/options.env
            ExecStartPre=/usr/bin/etcdctl set /coreos.com/network/config '{ "Network": "10.20.0.0/20", "SubnetLen": 24, "Backend": { "Type": "vxlan", "VNI": 1 } }'
            # VXlan/VNI/VLan example
            #ExecStartPre=/usr/bin/etcdctl ${CA} ${CERT} ${KEY} ${EP} set /coreos.com/network/red-db/config '{ "Network": "10.220.0.0/16", "SubnetLen": 24, "SubnetMin": "10.220.110.0", "SubnetMax": "10.220.200.0", "Backend": { "Type": "vxlan", "VNI": 6 } }'
            #ExecStartPre=/usr/bin/etcdctl ${CA} ${CERT} ${KEY} ${EP} set /coreos.com/network/red-app/config '{ "Network": "10.220.0.0/16", "SubnetLen": 24, "SubnetMin": "10.220.110.0", "SubnetMax": "10.220.200.0", "Backend": { "Type": "vxlan", "VNI": 5 } }'
            # This is needed for rkt to start due to some bug
            ExecStartPre=/usr/bin/rkt trust --skip-fingerprint-review --prefix=coreos.com/rkt/stage1-coreos
            ExecStartPre=/usr/bin/rkt image fetch coreos.com/rkt/stage1-coreos:1.29.0
            Restart=always

    - name: flanneld.service
      dropins:
        - name: 50-ssl.conf
          contents: |
            [Service]
            Environment="ETCD_SSL_DIR=/var/lib/etcd/ssl"

    - name: etcd-member-config.service
      enabled: true
      contents: |
        [Unit]
        Before=network-pre.target
        Wants=network-pre.target

        [Service]
        Type=oneshot
        ExecStart=/usr/bin/ln -sf /etc/metadata/coreos /run/metadata/coreos
        TimeoutSec=0
        RemainAfterExit=yes

        [Install]
        WantedBy=network.target

    - name: rkt-api-tcp.socket
      enabled: true
      contents: |
        [Unit]
        Description=rkt api service socket
        PartOf=rkt-api.service

        [Socket]
        ListenStream=127.0.0.1:15441
        Service=rkt-api.service
        BindIPv6Only=both

        [Install]
        WantedBy=sockets.target

    - name: rkt-api.service
      enabled: true
      contents: |
        [Unit]
        Description=rkt api service
        Documentation=http://github.com/rkt/rkt
        After=network.target rkt-api-tcp.socket
        Requires=rkt-api-tcp.socket

        [Service]
        ExecStart=/usr/bin/rkt api-service --local-config=/etc/rkt

        [Install]
        WantedBy=multi-user.target

    - name: rkt-gc.service
      enabled: true
      contents: |
        [Unit]
        Description=Garbage Collection for rkt

        [Service]
        Environment=GRACE_PERIOD=24h
        Type=oneshot
        ExecStart=/usr/bin/rkt gc --grace-period=${GRACE_PERIOD}

    - name: rkt-gc.timer
      enabled: true
      contents: |
        [Unit]
        Description=Periodic Garbage Collection for rkt

        [Timer]
        OnActiveSec=0s
        OnUnitActiveSec=12h

        [Install]
        WantedBy=multi-user.target

    - name: rkt-metadata.service
      enabled: true
      contents: |
        [Unit]
        Description=rkt metadata service
        Documentation=http://github.com/rkt/rkt
        After=network.target rkt-metadata.socket
        Requires=rkt-metadata.socket

        [Service]
        ExecStart=/usr/bin/rkt metadata-service

        [Install]
        WantedBy=multi-user.target

    - name: rkt-metadata.socket
      enabled: true
      contents: |
        [Unit]
        Description=rkt metadata service socket
        PartOf=rkt-metadata.service

        [Socket]
        ListenStream=/run/rkt/metadata-svc.sock
        SocketMode=0660
        SocketUser=root
        SocketGroup=root
        RemoveOnStop=true

        [Install]
        WantedBy=sockets.target

    - name: kubelet.service
      enabled: true
      contents: |
        [Unit]
        Description=The primary agent to run pods
        Documentation=http://kubernetes.io/docs/admin/kubelet/
        Requires=etcd-member.service
        After=flanneld.service
        
        [Service]
        Slice=system.slice
        Environment=RKT_GLOBAL_ARGS="--insecure-options=image"
        Environment=KUBELET_IMAGE_URL=docker://gcr.io/google_containers/hyperkube
        Environment=KUBELET_IMAGE_TAG=v1.13.1
        Environment=#HTTP_PROXY=
        Environment=#HTTPS_PROXY=
        #Environment=##http_proxy=
        #Environment=##https_proxy=
        Environment=no_proxy=localhost,127.0.0.0/8,127.0.0.1,::1,172.20.0.11,172.20.0.12,172.20.0.13,coreos1,coreos2,coreos3,coreos1.example.com,coreos2.example.com,coreos3.example.com,/var/run/docker.sock
        ExecStart=/usr/lib/coreos/kubelet-wrapper \
          --register-node=true \
          --hostname-override=coreos1 \
          --kubeconfig=/etc/kubernetes/ssl/kubeconfig.yaml \
          --config=/etc/kubernetes/config.yaml \
          --network-plugin=cni \
          --cni-conf-dir=/etc/kubernetes/cni/net.d \
          --lock-file=/var/run/lock/kubelet.lock \
          --exit-on-lock-contention \
          --logtostderr=true \
          --v=2
        Restart=always
        StartLimitInterval=0
        RestartSec=10
        
        [Install]
        WantedBy=multi-user.target

    - name: settimezone.service
      enabled: true
      contents: |
        [Unit]
        Description=Set the time zone

        [Service]
        ExecStart=/usr/bin/timedatectl set-timezone America/New_York
        RemainAfterExit=yes
        Type=oneshot

networkd:
  units:
    - name: 00-eno0.network
      contents: |
        [Match]
        Name=enp0s3

        [Network]
        Address=172.20.0.11/20
        Gateway=172.20.0.1
        DNS=8.8.8.8
        DNS=8.8.4.4
        Domains=example.com

flannel:
  version:        0.10.0
  etcd_prefix:    "/coreos.com/network"
  etcd_endpoints: "https://172.20.0.11:2379,https://172.20.0.12:2379,https://172.20.0.13:2379"
  etcd_cafile:    /etc/ssl/certs/ca.pem
  etcd_certfile:  /var/lib/etcd/ssl/etcd-node.pem
  etcd_keyfile:   /var/lib/etcd/ssl/etcd-node-key.pem
  interface:      enp0s3

etcd:
  version:                     3.2.17
  name:                        coreos1
  data_dir:                    /var/lib/etcd
  listen_client_urls:          https://172.20.0.11:2379,https://127.0.0.1:2379,https://127.0.0.1:4001
  advertise_client_urls:       https://172.20.0.11:2379
  listen_peer_urls:            https://172.20.0.11:2380
  initial_advertise_peer_urls: https://172.20.0.11:2380
  initial_cluster:             coreos1=https://172.20.0.11:2380,coreos2=https://172.20.0.12:2380,coreos3=https://172.20.0.13:2380
  initial_cluster_token:       etcd-token
  initial_cluster_state:       new
  cert_file:                   /var/lib/etcd/ssl/etcd-node.pem
  key_file:                    /var/lib/etcd/ssl/etcd-node-key.pem
  peer_cert_file:              /var/lib/etcd/ssl/etcd-node.pem
  peer_key_file:               /var/lib/etcd/ssl/etcd-node-key.pem
  client_cert_auth:            true
  peer_client_cert_auth:       true
  trusted_ca_file:             /etc/ssl/certs/ca.pem
  peer_trusted_ca_file:        /etc/ssl/certs/ca.pem
  auto_compaction_retention:   1


update:
  group:  "alpha"
locksmith:
  reboot_strategy: "etcd-lock"
  etcd_endpoints:  "https://172.20.0.11:2379"
  etcd_cafile: /etc/ssl/certs/ca.pem
  etcd_certfile: /var/lib/etcd/ssl/etcd-node.pem
  etcd_keyfile: /var/lib/etcd/ssl/etcd-node-key.pem
